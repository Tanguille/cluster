apiVersion: apps/v1

kind: Deployment

metadata:
  name: test
  namespace: default

spec:
  selector:
    matchLabels:
      name: test

  replicas: 1

  strategy:
    type: Recreate

    rollingUpdate: null

  template:
    metadata:
      labels:
        name: test

    spec:
      containers:
        - name: perfrunner

          image: openebs/tests-fio

          env:
            - name: DBENCH_TYPE
              value: "quick" # Change to "detailed" or "custom" as needed

          command: ["/bin/sh", "-c"]

          args: ["fio /datadir/fio-job-file.fio"] # Adjust this to point to your FIO job file

          volumeMounts:
            - mountPath: /datadir

              name: fio-vol

      volumes:
        - name: fio-vol

          persistentVolumeClaim:
            claimName: example-openebs-pvc
